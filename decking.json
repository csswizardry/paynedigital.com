{
    "images": {
        "pd/base": "./docker/base",
        "pd/web": "./docker/web",
        "pd/db": "./docker/mysql",
        "pd/phpunit": "./docker/phpunit"
    },
    "containers": {
        "pd_web": {
            "image": "pd/web",
            "port": ["80:80"],
            "dependencies": ["pd_db:db"]
        },
        "pd_phpunit": {
            "image": "pd/phpunit",
            "dependencies": ["pd_db:db"]
        },
        "pd_db": "pd/db"
    },
    "groups": {
        "build": {
            "options": {
                "env": ["PROJECT_MODE=build"],
                "mount": [".:/var/www"]
            },
            "containers": {
                "pd_web": {
                    "port": ["8181:80"]
                }
            }
        },
        "test": {
            "options": {
                "env": ["PROJECT_MODE=test"],
                "mount": [".:/var/www"]
            },
            "containers": {
                "pd_web": {
                    "port": ["9191:80"]
                }
            }
        }
    },
    "clusters": {
        "dev": {
            "group": "build",
            "containers": ["pd_web"]
        },
        "test": {
            "group": "test",
            "containers": ["pd_web", "pd_phpunit"]
        },
        "test-cli": {
            "group": "test",
            "containers": ["pd_phpunit"]
        }
    }
}

(function(f){function i(y,z,A){var B=this;return this.on("click.pjax",y,function(D){var C=f.extend({},q(z,A));if(!C.container){C.container=f(this).attr("data-pjax")||B}j(D,C)})}function j(B,y,z){z=q(y,z);var A=B.currentTarget;if(A.tagName.toUpperCase()!=="A"){throw"$.fn.pjax or $.pjax.click requires an anchor element"}if(B.which>1||B.metaKey||B.ctrlKey||B.shiftKey||B.altKey){return}if(location.protocol!==A.protocol||location.host!==A.host){return}if(A.hash&&A.href.replace(A.hash,"")===location.href.replace(location.hash,"")){return}if(A.href===location.href+"#"){return}var C={url:A.href,container:f(A).attr("data-pjax"),target:A,fragment:null};w(f.extend({},C,z));B.preventDefault()}function o(B,y,z){z=q(y,z);var A=B.currentTarget;if(A.tagName.toUpperCase()!=="FORM"){throw"$.pjax.submit requires a form element"}var C={type:A.method.toUpperCase(),url:A.action,data:f(A).serializeArray(),container:f(A).attr("data-pjax"),target:A,fragment:null};w(f.extend({},C,z));B.preventDefault()}function w(y){y=f.extend(true,{},f.ajaxSettings,w.defaults,y);if(f.isFunction(y.url)){y.url=y.url()}var D=y.target;var C=n(y.url).hash;var z=y.context=p(y.container);if(!y.data){y.data={}}y.data._pjax=z.selector;function B(G,F){var H=f.Event(G,{relatedTarget:D});z.trigger(H,F);return !H.isDefaultPrevented()}var A;y.beforeSend=function(G,F){if(F.type!=="GET"){F.timeout=0}G.setRequestHeader("X-PJAX","true");G.setRequestHeader("X-PJAX-Container",z.selector);if(!B("pjax:beforeSend",[G,F])){return false}if(F.timeout>0){A=setTimeout(function(){if(B("pjax:timeout",[G,y])){G.abort("timeout")}},F.timeout);F.timeout=0}y.requestUrl=n(F.url).href};y.complete=function(F,G){if(A){clearTimeout(A)}B("pjax:complete",[F,G,y]);B("pjax:end",[F,y])};y.error=function(I,J,G){var F=u("",I,y);var H=B("pjax:error",[I,J,G,y]);if(y.type=="GET"&&J!=="abort"&&H){v(F.url)}};y.success=function(I,G,K){var F=u(I,K,y);if(!F.contents){v(F.url);return}w.state={id:y.id||k(),url:F.url,title:F.title,container:z.selector,fragment:y.fragment,timeout:y.timeout};if(y.push||y.replace){window.history.replaceState(w.state,F.title,F.url)}if(F.title){document.title=F.title}z.html(F.contents);if(typeof y.scrollTo==="number"){f(window).scrollTop(y.scrollTo)}if((y.replace||y.push)&&window._gaq){_gaq.push(["_trackPageview"])}if(C!==""){var H=n(F.url);H.hash=C;w.state.url=H.href;window.history.replaceState(w.state,F.title,H.href);var J=f(H.hash);if(J.length){f(window).scrollTop(J.offset().top)}}B("pjax:success",[I,G,K,y])};if(!w.state){w.state={id:k(),url:window.location.href,title:document.title,container:z.selector,fragment:y.fragment,timeout:y.timeout};window.history.replaceState(w.state,document.title)}var E=w.xhr;if(E&&E.readyState<4){E.onreadystatechange=f.noop;E.abort()}w.options=y;var E=w.xhr=f.ajax(y);if(E.readyState>0){if(y.push&&!y.replace){h(w.state.id,z.clone().contents());window.history.pushState(null,"",x(y.requestUrl))}B("pjax:start",[E,y]);B("pjax:send",[E,y])}return w.xhr}function t(y,z){var A={url:window.location.href,push:false,replace:true,scrollTo:false};return w(f.extend(A,q(y,z)))}function v(y){window.history.replaceState(null,"","#");window.location.replace(y)}function a(B){var C=B.state;if(C&&C.container){var y=f(C.container);if(y.length){var A=d[C.id];if(w.state){var D=w.state.id<C.id?"forward":"back";r(D,w.state.id,y.clone().contents())}else{w.state=C;return}var E=f.Event("pjax:popstate",{state:C,direction:D});y.trigger(E);var z={id:C.id,url:C.url,container:y,push:false,fragment:C.fragment,timeout:C.timeout,scrollTo:false};if(A){y.trigger("pjax:start",[null,z]);if(C.title){document.title=C.title}y.html(A);w.state=C;y.trigger("pjax:end",[null,z])}else{w(z)}y[0].offsetHeight}else{v(location.href)}}}function c(z){var y=f.isFunction(z.url)?z.url():z.url,C=z.type?z.type.toUpperCase():"GET";var A=f("<form>",{method:C==="GET"?"GET":"POST",action:y,style:"display:none"});if(C!=="GET"&&C!=="POST"){A.append(f("<input>",{type:"hidden",name:"_method",value:C.toLowerCase()}))}var B=z.data;if(typeof B==="string"){f.each(B.split("&"),function(D,E){var F=E.split("=");A.append(f("<input>",{type:"hidden",name:F[0],value:F[1]}))})}else{if(typeof B==="object"){for(key in B){A.append(f("<input>",{type:"hidden",name:key,value:B[key]}))}}}f(document.body).append(A);A.submit()}function k(){return(new Date).getTime()}function x(y){return y.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function n(z){var y=document.createElement("a");y.href=z;return y}function q(y,z){if(y&&z){z.container=y}else{if(f.isPlainObject(y)){z=y}else{z={container:y}}}if(z.container){z.container=p(z.container)}return z}function p(y){y=f(y);if(!y.length){throw"no pjax container for "+y.selector}else{if(y.selector!==""&&y.context===document){return y}else{if(y.attr("id")){return f("#"+y.attr("id"))}else{throw"cant get selector for pjax container!"}}}}function l(z,y){return z.filter(y).add(z.find(y))}function s(y){return f.parseHTML(y,document,true)}function u(B,D,z){var C={};C.url=x(D.getResponseHeader("X-PJAX-URL")||z.requestUrl);if(/<html/i.test(B)){var y=f(s(B.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0]));var A=f(s(B.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]))}else{var y=A=f(s(B))}if(A.length===0){return C}C.title=l(y,"title").last().text();if(z.fragment){if(z.fragment==="body"){var E=A}else{var E=l(A,z.fragment).first()}if(E.length){C.contents=E.contents();if(!C.title){C.title=E.attr("title")||E.data("title")}}}else{if(!/<html/i.test(B)){C.contents=A}}if(C.contents){C.contents=C.contents.not("title");C.contents.find("title").remove()}if(C.title){C.title=f.trim(C.title)}return C}var d={};var e=[];var g=[];function h(z,y){d[z]=y;g.push(z);while(e.length){delete d[e.shift()]}while(g.length>w.defaults.maxCacheLength){delete d[g.shift()]}}function r(A,C,z){var B,y;d[C]=z;if(A==="forward"){B=g;y=e}else{B=e;y=g}B.push(C);if(C=y.pop()){delete d[C]}}function m(){f.fn.pjax=i;f.pjax=w;f.pjax.enable=f.noop;f.pjax.disable=b;f.pjax.click=j;f.pjax.submit=o;f.pjax.reload=t;f.pjax.defaults={timeout:650,push:true,replace:false,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20};f(window).bind("popstate.pjax",a)}function b(){f.fn.pjax=function(){return this};f.pjax=c;f.pjax.enable=m;f.pjax.disable=f.noop;f.pjax.click=f.noop;f.pjax.submit=f.noop;f.pjax.reload=function(){window.location.reload()};f(window).unbind("popstate.pjax",a)}if(f.inArray("state",f.event.props)<0){f.event.props.push("state")}f.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/);f.support.pjax?m():b()})(jQuery);var pjaxify=(function(){var b=1000,h=null,g=[],a=null,e={};var d=function(i){$(i).attr("href",$(i).attr("href").replace(/\?__t=\d+$/,""))};var c=function(){$("html").removeClass("transition");$(".inner a").each(function(j){d(this)});if(typeof twttr!=="undefined"){twttr.widgets.load()}};var f=function(){var k=g.length,l=window.location.pathname;if(l.search(/^\/\d{4}\/\d{2}/)!==-1||l.search(/^\/tag\/[a-z0-9%\s\.]+$/)!==-1){l="/articles"}while(k--){var j=g[k].attr("href");if(j==l.substr(0,j.length)){g[k].parent().addClass("active");break}}};e.init=function(){h=$("body").get(0);a=h.className.match(/theme--([\w-]+)/)[1];$(document).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",".theme",c);$(".nav li a").each(function(k,j){g.push($(j))});g.sort(function(k,j){return k.attr("href").length-j.attr("href").length});if($(".nav li.active").length==0){f()}$(document).on("click",".inner a",function(j){d(this)});var i={timeout:b,scrollTo:0};$(document).pjax("a.pjax",".inner",i);$(document).on("pjax:end",function(){$(".nav li").removeClass("active");f();$("html").addClass("transition");$(".inner a").each(function(j){var k=new Date().getTime();$(this).attr("href",$(this).attr("href")+"?__t="+k)});linkify.focus("li.active > a");setTimeout(function(){var l,k;var j=$(".theme-identifier");k="theme theme--";if(j.length){k+=$.trim(j.text())}else{k+=a}if(k==h.className){c()}h.className=k},4)})};return e})();var linkify=(function(e,a){var c=null,b=4,g=null,f=0,d={};d.init=function(){c=$(".header__camera");f=c.width();d.focus("li.active > a");$(e).on("resize",function(h){clearTimeout(g);g=setTimeout(function(){d.focus("li.active > a")},40)})};d.focus=function(h){var j=$(h);if(j.length){var k=j.position().left;var i=j.width();c.css({"margin-left":k-b-f,width:i+(b*2)})}};return d}(window,document));var Forms={handle:function(a,b){$(a).submit(function(g){var c=this;g.preventDefault();var f=$(c).find("input[type='submit']");f.attr("disabled","").addClass("btn-disabled");var d=f.val();f.val("Sending...");$(c).find(".error").removeClass("error");$(c).find(".error__help").html("");$.post($(c).attr("action"),$(c).serialize(),function(e){f.removeAttr("disabled").removeClass("btn-disabled").val(d);if(e._errors!=null){for(var h in e._errors){$(c).find("#"+h+"_error").html(e._errors[h]).parents("li").addClass("error")}return}b(c)},"json")})}};var Gistify=(function(a){var b=a.write,c=null,d={};d.init=function(){a.write=d.onDocumentWrite;c=$("head")};d.onDocumentWrite=function(e){if(e.search(/^<link href=/)!==-1){c.append(e)}else{var f=e.match(/id="gist([^\s]+)"/)[1];$("#g"+f).html(e)}};return d}(document));